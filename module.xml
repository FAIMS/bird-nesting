<?xml version="1.0" encoding="utf-8"?>
<!--@PREPROC:  ./proc/pre.sh-->
<!--@POSTPROC: ./proc/post.sh-->
<module suppressWarnings="true">

<Login f="nodata">
  <Login>
    <User t="list" f="user nolabel" l="Control"/>
  </Login>
</Login>

<Control f="nodata">
  <Control f="noscroll">
    <Add_New_Box t="button" l="Box"/>
    <Existing_Boxes t="list" e="Box"/>
  </Control>
  <Defaults>
    <autonum/>
  </Defaults>
  <search/>
  <Revisit f="noscroll">
    <Revisit f="nolabel">
      <!--This is replaced with a table view using @POSTPROC-->
    </Revisit>
  </Revisit>
</Control>

<Box>
  <Box>
    <Box_Box_ID f="id autonum noannotation nocertainty">
      Box ID
      <str>
        <pos>1</pos>
        <fmt>Box-$2</fmt>
      </str>
    </Box_Box_ID>
    <Box_Location_Name f="id">
      Location Name
      <str>
        <pos>2</pos>
        <fmt>$1</fmt>
      </str>
      <opts>
        <opt>Gap Hills</opt>
        <opt>Saloon</opt>
        <opt>Sandsone</opt>
        <opt>White Tank</opt>
        <opt>Old Aviary</opt>
        <opt>New Aviary</opt>
        <opt>W19G</opt>
        <opt>W19F</opt>
      </opts>
    </Box_Location_Name>
    <gps/>
    <Height_m b="decimal">
      Height (m)
      <desc>Measure height above ground in metres.</desc>
    </Height_m>
    <Orientation_degrees b="decimal">
      Orientation (degrees)
      <desc>Enter degrees of azimuth.</desc>
    </Orientation_degrees>
    <Comments/>
    <Add_Box_Status t="button" lc="Box_Status"/>
    <Box_Statuses t="dropdown" ec="Box_Status"/>
    <Add_New_Nest t="button" lc="Nest"/>
    <Existing_Nests t="dropdown" ec="Nest"/>
  </Box>
</Box>

<Box_Status>
  <Box_Status>
    <Box_Status_Box_ID f="id">
      Box ID
      <str>
        <pos>1</pos>
        <fmt>$2-</fmt>
      </str>
    </Box_Status_Box_ID>
    <timestamp f="id">
      Box Status Recorded at
      <str>
        <pos>2</pos>
        <fmt>$2</fmt>
      </str>
    </timestamp>
    <Box_Status>
      <opts>
        <opt>Empty</opt>
        <opt>Active</opt>
        <opt>Terminated</opt>
        <opt>No Observation</opt>
      </opts>
    </Box_Status>
  </Box_Status>
</Box_Status>

<Nest>
  <Nest>
    <Nest_Box_ID f="id noannotation nocertainty readonly">
      Box ID
      <str>
        <pos>2</pos>
        <fmt>Box-$2-</fmt>
      </str>
    </Nest_Box_ID>
    <Nest_Location_Name f="id readonly noannotation nocertainty">
      Location Name
      <str>
        <pos>3</pos>
        <fmt>$2</fmt>
      </str>
    </Nest_Location_Name>
    <Nest_Nest_ID f="id autonum noannotation nocertainty">
      Nest ID
      <str>
        <pos>1</pos>
        <fmt>Nest-$2-</fmt>
      </str>
    </Nest_Nest_ID>
    <timestamp>
      Nest Created at
    </timestamp>
    <Day_of_Lay b="date"/>
    <Compute_Estimated_Day_of_Hatching t="button"/>
    <Estimated_Day_of_Hatching f="readonly"/>
    <Nest_Completed t="button"/>
    <Nest_Completed_at f="readonly"/>
    <Add_Nest_Measurement t="button" lc="Nest_Measurement"/>
    <Nest_Measurements  t="dropdown" ec="Nest_Measurement"/>
    <Add_New_Egg t="button" lc="Egg"/>
    <Existing_Eggs t="dropdown" ec="Egg"/>
    <Add_New_Chick t="button" lc="Chick"/>
    <Existing_Chicks t="dropdown" ec="Chick"/>
  </Nest>
</Nest>

<Nest_Measurement>
  <Nest_Measurement>
    <Nest_Measurement_Nest_ID f="id">
      Nest ID
      <str>
        <pos>1</pos>
        <fmt>Nest-$2-</fmt>
      </str>
    </Nest_Measurement_Nest_ID>
    <timestamp f="id">
      Nest Measurement Recorded at
      <str>
        <pos>2</pos>
        <fmt>$2</fmt>
      </str>
    </timestamp>
    <Egg_Count b="decimal"/>
    <Nest_Status>
      <desc>If near 100%, go visit the next day.</desc>
      <opts>
        <opt>&lt;25%</opt>
        <opt>25-50%</opt>
        <opt>50-75%</opt>
        <opt>75-100%</opt>
      </opts>
    </Nest_Status>
    <Hatched_Chick_Count_Live b="decimal"/>
    <Hatched_Chick_Count_Dead b="decimal"/>
  </Nest_Measurement>
</Nest_Measurement>

<Egg>
  <Egg>
    <Egg_Box_ID f="id noannotation nocertainty readonly">
      Box ID
      <str>
        <pos>3</pos>
        <fmt>Box-$2-</fmt>
      </str>
    </Egg_Box_ID>
    <Egg_Location_Name f="id readonly noannotation nocertainty">
      Location Name
      <str>
        <pos>4</pos>
        <fmt>$2-</fmt>
      </str>
    </Egg_Location_Name>
    <Egg_Nest_ID f="id noannotation nocertainty readonly">
      Nest ID
      <str>
        <pos>2</pos>
        <fmt>Nest-$2-</fmt>
      </str>
    </Egg_Nest_ID>
    <Egg_ID f="id autonum noannotation nocertainty">
      <str>
        <pos>1</pos>
        <fmt>Egg-$2-</fmt>
      </str>
    </Egg_ID>
    <timestamp f="id">
      Egg recorded at
      <str>
        <pos>5</pos>
        <fmt>$2</fmt>
      </str>
    </timestamp>
    <Egg_Length_mm b="decimal">
      Egg Length (mm)
    </Egg_Length_mm>
    <Egg_Width_mm b="decimal">
      Egg Width (mm)
    </Egg_Width_mm>
    <Egg_Weight_g b="decimal">
      Egg Weight (g)
    </Egg_Weight_g>
  </Egg>
</Egg>

<Chick>
  <Chick>
    <Chick_Box_ID f="id noannotation nocertainty readonly">
      Box ID
      <str>
        <pos>3</pos>
        <fmt>Box-$2-</fmt>
      </str>
    </Chick_Box_ID>
    <Chick_Location_Name f="id readonly noannotation nocertainty">
      Location Name
      <str>
        <pos>4</pos>
        <fmt>$2-</fmt>
      </str>
    </Chick_Location_Name>
    <Chick_Nest_ID f="id noannotation nocertainty readonly">
      Nest ID
      <str>
        <pos>2</pos>
        <fmt>Nest-$2-</fmt>
      </str>
    </Chick_Nest_ID>
    <Chick_Chick_ID f="id autonum noannotation nocertainty">
      Chick ID
      <!--TODO: Make sure that the table view query contains "Chick Chick ID" and not 'Chick ID'-->
      <str>
        <pos>1</pos>
        <fmt>Chick-$2-</fmt>
      </str>
    </Chick_Chick_ID>
    <timestamp f="id">
      Chick Recorded at
      <str>
        <pos>5</pos>
        <fmt>$2</fmt>
      </str>
    </timestamp>
    <Bird_Species>
      <opts>
        <opt>Zebra Finch</opt>
        <opt>Long Tailed Finch</opt>
        <opt>House Sparrow</opt>
        <opt>Other</opt>
        <opt>No Observation</opt>
      </opts>
    </Bird_Species>
    <Band_Number/>
    <Notes/>
    <Add_Chick_Measurement t="button" lc="Chick_Measurement"/>
    <Existing_Chick_Measurements t="dropdown" ec="Chick_Measurement"/>
  </Chick>
</Chick>

<Chick_Measurement>
  <Chick_Measurement>
    <Chick_Measurement_Chick_ID f="id">
      <!--TODO: Ensure that Measurement_Chick_ID is changed to Chick_Measurement_Chick_ID in query-->
      Chick ID
      <str>
        <pos>1</pos>
        <fmt>Chick-$2-</fmt>
      </str>
    </Chick_Measurement_Chick_ID>
    <timestamp f="id">
      Chick Measurement Recorded at
      <str>
        <pos>2</pos>
        <fmt>$2</fmt>
      </str>
    </timestamp>
    <Chick_Alive t="radio">
      Chick Alive?
      <opts>
        <opt>Yes</opt>
        <opt>No</opt>
        <opt>No Observation</opt>
      </opts>
    </Chick_Alive>
    <Chick_Age_days b="decimal">
      Chick Age (days)
    </Chick_Age_days>
    <Weight_g b="decimal">
      Weight (g)
    </Weight_g>
    <Head_Length_mm b="decimal">
      Head Length (mm)
    </Head_Length_mm>
    <Wing_Length_mm b="decimal">
      Wing Length (mm)
    </Wing_Length_mm>
    <Tarsus_Length_mm b="decimal">
      Tarsus Length (mm)
    </Tarsus_Length_mm>
    <Notes/>
    <Picture t="camera"/>
  </Chick_Measurement>
</Chick_Measurement>

<logic><![CDATA[
  <!--@SOURCE: logic/field-inheritance.bsh-->
  <!--@SOURCE: logic/create-new-nest-button.bsh-->
  <!--@SOURCE: logic/compute-day-of-hatching-estimate-button.bsh-->
  <!--@SOURCE: logic/nest-completed-button.bsh-->
  <!--@SOURCE: logic/table-view.bsh-->
]]></logic>
</module>
